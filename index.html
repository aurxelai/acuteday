<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Journey | Valentine's 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #0a0a0a; overflow: hidden; font-family: 'Poppins', sans-serif; }
        canvas { display: block; margin: 0 auto; box-shadow: 0 0 50px rgba(0,0,0,0.8); }

        /* Story Modal Styling */
        #story-modal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9);
            width: 85%; max-width: 450px; background: white; border-radius: 20px;
            padding: 30px; text-align: center; display: none; z-index: 1000;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5); transition: all 0.3s ease-out;
            border: 1px solid rgba(0,0,0,0.1);
        }
        #story-modal.active { display: block; transform: translate(-50%, -50%) scale(1); }

        /* Shaadi/Royal Theme Override */
        #story-modal.royal { background: #5e0000; color: #f1d279; border: 3px solid #f1d279; }
        #story-modal.royal h2 { color: #f1d279; }
        #story-modal.royal button { background: #f1d279; color: #5e0000; }

        h2 { font-family: 'Playfair Display', serif; color: #333; margin-top: 0; font-size: 24px; }
        p { color: #666; line-height: 1.6; font-size: 15px; margin-bottom: 20px; }
        .royal p { color: #f5e6be; }

        .img-container {
            width: 100%; height: 220px; background: #f0f0f0; border-radius: 12px;
            margin-bottom: 20px; overflow: hidden; display: flex; align-items: center; justify-content: center;
        }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }

        button {
            background: #ff4d6d; color: white; border: none; padding: 12px 30px;
            border-radius: 50px; cursor: pointer; font-size: 16px; font-weight: 600;
            transition: 0.2s; box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
        }
        button:hover { transform: translateY(-2px); filter: brightness(1.1); }

        /* Instructions Overlay */
        #instructions {
            position: fixed; bottom: 20px; width: 100%; text-align: center;
            color: rgba(255,255,255,0.6); pointer-events: none; font-size: 14px;
        }
    </style>
</head>
<body>

<div id="instructions">Use ARROW KEYS or TAP & HOLD to fly upward</div>

<div id="story-modal">
    <h2 id="m-title">Milestone Title</h2>
    <div class="img-container">
        <span id="img-placeholder" style="color:#ccc; font-style:italic;">Photo goes here</span>
        <img id="m-img" src="" style="display:none;">
    </div>
    <p id="m-text">Your beautiful story text will go right here. You can write as much as you like!</p>
    <button id="m-btn" onclick="closeModal()">Continue Journey ‚Üí</button>
</div>

<script>
/** * EDIT YOUR STORY HERE 
 * Add your photo filenames (e.g., 'prague.jpg') to the 'photo' field.
 * They must be in the same folder as this index.html file.
 */
const JOURNEY_DATA = [
    { title: "The Beginning: Abu Dhabi", icon: "üïå", photo: "abu-dhabi.jpg", text: "Write about that first spark in the desert heat..." },
    { title: "Dating Days", icon: "üë©‚Äç‚ù§Ô∏è‚Äçüë®", photo: "dating.jpg", text: "All the little moments that made us 'us'..." },
    { title: "Almaty, Kazakhstan", icon: "üèîÔ∏è", photo: "almaty.jpg", text: "Standing on top of Shymbulak, feeling like we were on top of the world." },
    { title: "Prague & Budapest", icon: "üè∞", photo: "budapest.jpg", text: "From Chimney Cakes to the wild lights of the Ruin Bars. Europe was magic with you." },
    { title: "Japan Trip", icon: "üç£", photo: "japan.jpg", text: "Lost in translation but found in each other's company." },
    { title: "Long Distance & Bangalore", text: "The late-night calls and the airport goodbyes. Every mile made us stronger.", icon: "‚úàÔ∏è", photo: "bangalore.jpg" },
    { title: "Philippines", icon: "üèùÔ∏è", photo: "philippines.jpg", text: "Island hopping and realizing there's no one else I'd rather explore the world with." },
    { title: "Our Shaadi", icon: "üíç", photo: "shaadi.jpg", text: "Our Royal moment. The beginning of a legacy in our Haveli.", isRoyal: true },
    { title: "The Future", icon: "üíù", photo: "valentine.jpg", text: "I want every single milestone for the rest of my life to be with you. \n\n Will you be my Valentine?", isRoyal: true, isFinal: true }
];

class JourneyGame extends Phaser.Scene {
    constructor() { super('JourneyGame'); }

    create() {
        const { width, height } = this.scale;
        this.currentIdx = 0;
        this.isPaused = false;

        // 1. Create a Parallax Starfield
        this.stars = this.add.group({ key: 'star', frameQuantity: 100 });
        for(let i=0; i<150; i++) {
            let s = this.add.circle(Phaser.Math.Between(0, width), Phaser.Math.Between(-height*10, height), 1, 0xffffff, 0.5);
            s.setScrollFactor(Phaser.Math.FloatBetween(0.1, 0.5));
        }

        // 2. Setup Player (Replace Emoji with an image if you like)
        this.player = this.add.text(width/2, height - 100, 'üöÄ', { fontSize: '42px' }).setOrigin(0.5);
        this.physics.add.existing(this.player);
        this.player.body.setCollideWorldBounds(true);

        // 3. Setup Milestones
        this.milestones = this.physics.add.group();
        JOURNEY_DATA.forEach((data, i) => {
            let m = this.add.text(width/2, (height - 200) - (i * 600), data.icon, { fontSize: '80px' }).setOrigin(0.5);
            this.physics.add.existing(m);
            m.setData('info', { ...data, index: i });
            this.milestones.add(m);
            
            // Subtle glow effect
            this.tweens.add({ targets: m, scale: 1.1, duration: 800, yoyo: true, repeat: -1, ease: 'Sine.easeInOut' });
        });

        // 4. Camera Follow
        this.cameras.main.startFollow(this.player, true, 0.1, 0.1, 0, 150);
        this.cameras.main.setBackgroundColor('#050510');

        // 5. Controls
        this.cursors = this.input.keyboard.createCursorKeys();
        
        // 6. Collision
        this.physics.add.overlap(this.player, this.milestones, (p, m) => {
            let info = m.getData('info');
            if(info.index === this.currentIdx) {
                this.triggerMilestone(info);
                m.destroy();
                this.currentIdx++;
            }
        });
    }

    update() {
        if(this.isPaused) {
            this.player.body.setVelocity(0);
            return;
        }

        const moveSpeed = 300;
        let isMoving = this.cursors.up.isDown || this.input.activePointer.isDown;

        if (isMoving) {
            this.player.body.setVelocityY(-moveSpeed);
            // Change bg color gradually as we go higher
            if(this.currentIdx > 6) {
                this.cameras.main.setBackgroundColor('#2a0000'); // Shifting to Royal
            }
        } else {
            this.player.body.setVelocityY(0);
        }

        if (this.cursors.left.isDown) this.player.x -= 5;
        if (this.cursors.right.isDown) this.player.x += 5;
    }

    triggerMilestone(data) {
        this.isPaused = true;
        const modal = document.getElementById('story-modal');
        const title = document.getElementById('m-title');
        const text = document.getElementById('m-text');
        const img = document.getElementById('m-img');
        const placeholder = document.getElementById('img-placeholder');
        const btn = document.getElementById('m-btn');

        // Theme check
        if(data.isRoyal) modal.classList.add('royal');
        else modal.classList.remove('royal');

        title.innerText = data.title;
        text.innerText = data.text;
        
        if(data.photo) {
            img.src = data.photo;
            img.style.display = 'block';
            placeholder.style.display = 'none';
        } else {
            img.style.display = 'none';
            placeholder.style.display = 'inline';
        }

        if(data.isFinal) btn.innerText = "YES! I'LL BE YOUR VALENTINE ‚ù§Ô∏è";

        modal.classList.add('active');
    }
}

const config = {
    type: Phaser.AUTO,
    width: window.innerWidth > 500 ? 500 : window.innerWidth,
    height: window.innerHeight,
    parent: 'game-container',
    physics: { default: 'arcade' },
    scene: JourneyGame
};

const game = new Phaser.Game(config);

function closeModal() {
    const modal = document.getElementById('story-modal');
    modal.classList.remove('active');
    game.scene.scenes[0].isPaused = false;
}
</script>

</body>
</html>
