<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Journey to Forever</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --speed: 0.6s; /* Walk cycle speed */
        }

        body {
            margin: 0; overflow: hidden; background: #000;
            font-family: 'Lato', sans-serif;
        }

        /* --- THE VIEWPORT --- */
        #viewport {
            position: relative; width: 100vw; height: 100vh;
            overflow: hidden;
        }

        /* --- WORLD CONTAINER (Moves left as you walk right) --- */
        #world {
            position: absolute; top: 0; left: 0;
            height: 100%; display: flex;
            transition: transform 0.1s linear; /* smooth movement */
        }

        /* --- BIOMES (The Backgrounds) --- */
        .biome {
            position: relative; width: 2000px; height: 100%;
            flex-shrink: 0; overflow: hidden;
        }

        /* 1. Desert (Abu Dhabi) */
        .biome.desert { background: linear-gradient(to bottom, #FF8008, #FFC837); }
        .biome.desert .scenery {
            position: absolute; bottom: 0; width: 100%; height: 300px;
            background: linear-gradient(180deg, transparent 0%, rgba(166, 108, 0, 0.4) 100%);
            clip-path: polygon(0% 100%, 20% 40%, 40% 90%, 60% 30%, 80% 80%, 100% 100%);
        }

        /* 2. City Night (Europe/Dating) */
        .biome.city { background: linear-gradient(to bottom, #0F2027, #203A43, #2C5364); }
        .biome.city .moon {
            position: absolute; top: 100px; right: 200px; width: 80px; height: 80px;
            background: #fff; border-radius: 50%; box-shadow: 0 0 40px #fff;
        }
        .biome.city .skyline {
            position: absolute; bottom: 0; width: 100%; height: 250px;
            background: #081418; 
            clip-path: polygon(0% 100%, 10% 20%, 15% 20%, 15% 100%, 20% 100%, 20% 40%, 30% 40%, 30% 100%, 40% 100%, 40% 10%, 55% 10%, 55% 100%, 65% 100%, 65% 50%, 80% 50%, 80% 100%, 100% 100%);
        }

        /* 3. Mountains (Almaty) */
        .biome.snow { background: linear-gradient(to bottom, #83a4d4, #b6fbff); }
        .biome.snow .peak {
            position: absolute; bottom: 0; border-left: 200px solid transparent; border-right: 200px solid transparent;
            border-bottom: 500px solid rgba(255,255,255,0.8);
        }

        /* 4. Japan (Sakura) */
        .biome.japan { background: linear-gradient(to bottom, #ff9a9e, #fecfef); }
        .biome.japan .tree {
            position: absolute; bottom: 0; left: 100px; width: 10px; height: 150px; background: #5d4037;
        }
        .biome.japan .blossoms {
            position: absolute; bottom: 120px; left: 50px; width: 120px; height: 120px;
            background: #ffb7b2; border-radius: 50%; opacity: 0.8;
        }

        /* 5. Royal (Shaadi) */
        .biome.royal { background: linear-gradient(to bottom, #4a0000, #900000); }
        .biome.royal .pillar {
            position: absolute; bottom: 0; width: 60px; height: 100%;
            background: linear-gradient(90deg, #d4af37, #f1c40f, #d4af37);
            border-left: 5px solid #b7950b; border-right: 5px solid #b7950b;
        }

        /* --- THE SPRITE CHARACTER --- */
        #player {
            position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%);
            width: 64px; height: 64px; z-index: 100;
        }

        /* REPLACE THIS SECTION TO USE YOUR OWN SPRITE!
           1. Upload a 'sprite.png' (a strip of 4 frames walking right).
           2. Uncomment background-image.
           3. Remove background-color (the red box).
        */
        .character-sprite {
            width: 100%; height: 100%;
            /* background-image: url('sprite.png'); */ 
            background-color: #ff4d6d; /* Placeholder Red Box */
            border-radius: 10px; box-shadow: 0 0 20px rgba(255, 77, 109, 0.5);
            background-size: 400% 100%; /* 4 frames = 400% width */
            background-repeat: no-repeat;
        }

        /* The Animation Class */
        .walking {
            animation: walk-anim var(--speed) steps(3) infinite; /* steps(3) for 4 frames */
        }

        @keyframes walk-anim {
            from { background-position: 0% 0; }
            to { background-position: 100% 0; }
        }

        /* --- MEMORY CARDS (Floating Polaroids) --- */
        .memory {
            position: absolute; top: 15%; 
            width: 300px; padding: 15px 15px 40px 15px;
            background: white; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateY(100px) scale(0.9); opacity: 0;
            transition: all 0.8s ease-out;
            z-index: 50; text-align: center;
        }

        .memory.active { transform: translateY(0) scale(1) rotate(var(--rot)); opacity: 1; }
        
        .memory img { width: 100%; height: 250px; object-fit: cover; background: #eee; margin-bottom: 15px; }
        .memory h2 { font-family: 'Cinzel', serif; margin: 0 0 5px 0; color: #333; font-size: 1.5rem; }
        .memory p { font-size: 0.9rem; color: #666; margin: 0; line-height: 1.4; }

        .royal-card { border: 4px solid #d4af37; background: #fffdf0; }
        .royal-card h2 { color: #800000; }

        /* --- UI --- */
        #controls-hint {
            position: fixed; bottom: 30px; width: 100%; text-align: center;
            color: rgba(255,255,255,0.7); font-size: 14px; letter-spacing: 2px;
            text-transform: uppercase; animation: pulse 2s infinite; pointer-events: none;
        }
        @keyframes pulse { 0%,100%{opacity:0.5} 50%{opacity:1} }
        
        #final-btn {
            display: none; background: #d4af37; color: #5e0000; border: none;
            padding: 10px 20px; margin-top: 15px; cursor: pointer; font-weight: bold;
            font-family: 'Cinzel', serif; text-transform: uppercase;
        }

    </style>
</head>
<body>

    <div id="viewport">
        <div id="world">
            
            <div class="biome desert">
                <div class="scenery" style="left:0;"></div>
                <div class="scenery" style="left:50%; opacity:0.5; bottom:-50px;"></div>
                
                <div class="memory" style="left: 600px;" data-rot="-2deg">
                    <img src="abudhabi.jpg">
                    <h2>Abu Dhabi</h2>
                    <p>Where the story began. The desert heat couldn't match the spark between us.</p>
                </div>
            </div>

            <div class="biome city">
                <div class="moon"></div>
                <div class="skyline"></div>
                
                <div class="memory" style="left: 500px;" data-rot="3deg">
                    <img src="dating.jpg">
                    <h2>The Early Days</h2>
                    <p>Coffee dates, long talks, and falling in love.</p>
                </div>
                
                <div class="memory" style="left: 1400px;" data-rot="-1deg">
                    <img src="budapest.jpg">
                    <h2>Europe</h2>
                    <p>Prague castles and Budapest nights. The world is magic with you.</p>
                </div>
            </div>

            <div class="biome snow">
                <div class="peak" style="left: 100px;"></div>
                <div class="peak" style="left: 500px; transform: scale(1.5);"></div>
                <div class="peak" style="left: 1200px;"></div>

                <div class="memory" style="left: 800px;" data-rot="2deg">
                    <img src="almaty.jpg">
                    <h2>Almaty</h2>
                    <p>Shymbulak peaks. Freezing cold but hearts so warm.</p>
                </div>
            </div>

            <div class="biome japan">
                <div class="tree"></div><div class="blossoms"></div>
                <div class="tree" style="left:600px"></div><div class="blossoms" style="left:550px"></div>
                <div class="tree" style="left:1200px"></div><div class="blossoms" style="left:1150px"></div>

                <div class="memory" style="left: 700px;" data-rot="-3deg">
                    <img src="japan.jpg">
                    <h2>Japan</h2>
                    <p>Sakura season and neon lights. Lost in Tokyo together.</p>
                </div>
            </div>

            <div class="biome royal">
                <div class="pillar" style="left: 100px;"></div>
                <div class="pillar" style="left: 1800px;"></div>
                
                <div class="memory royal-card" style="left: 500px;" data-rot="0deg">
                    <img src="shaadi.jpg">
                    <h2>The Shaadi</h2>
                    <p>Our Royal Haveli. The start of our forever.</p>
                </div>

                <div class="memory royal-card" style="left: 1200px; transform: scale(1.2);" data-rot="0deg">
                    <img src="valentine.jpg">
                    <h2>The Future</h2>
                    <p>I want to walk this path with you forever.<br>Will you be my Valentine?</p>
                    <button id="final-btn" onclick="alert('❤️ YES! ❤️')">Yes!</button>
                </div>
            </div>
            
        </div>
    </div>

    <div id="player">
        <div class="character-sprite" id="sprite"></div>
    </div>

    <div id="controls-hint">Hold RIGHT ARROW to Walk</div>

    <script>
        const world = document.getElementById('world');
        const sprite = document.getElementById('sprite');
        const memories = document.querySelectorAll('.memory');
        const finalBtn = document.getElementById('final-btn');

        let position = 0;
        let isWalking = false;
        const SPEED = 8; // Adjust walking speed here

        // Keyboard Logic
        window.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight') {
                isWalking = true;
                sprite.classList.add('walking');
                // Flip sprite to face right
                sprite.style.transform = 'scaleX(1)';
            }
        });

        window.addEventListener('keyup', (e) => {
            if(e.key === 'ArrowRight') {
                isWalking = false;
                sprite.classList.remove('walking');
            }
        });

        // Touch Logic (Mobile)
        window.addEventListener('touchstart', () => { isWalking = true; sprite.classList.add('walking'); });
        window.addEventListener('touchend', () => { isWalking = false; sprite.classList.remove('walking'); });

        // Game Loop
        function loop() {
            if(isWalking) {
                position += SPEED;
                // Move the world LEFT to create illusion of walking RIGHT
                world.style.transform = `translateX(-${position}px)`;
            }

            // Check for Memories coming into view
            memories.forEach(card => {
                // Get absolute position of the card inside the scrolling world
                // We calculate the card's world X position relative to current scroll
                
                // Approximate logic: 
                // The card is inside a biome. We need to know the total offset.
                // But simpler: just check bounding box relative to viewport.
                const rect = card.getBoundingClientRect();
                
                // If card is near center of screen (width/2)
                if(rect.left < window.innerWidth * 0.7 && rect.right > 0) {
                    card.classList.add('active');
                    // Apply the rotation stored in data-rot
                    card.style.setProperty('--rot', card.getAttribute('data-rot'));
                    
                    // Reveal button if it's the last card
                    if(card.querySelector('button')) {
                        document.getElementById('final-btn').style.display = 'inline-block';
                    }
                }
            });

            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
